<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pennington Flashcards</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e0e0e0;
            padding: 20px;
        }
        .container { max-width: 700px; margin: 0 auto; }
        header { text-align: center; margin-bottom: 30px; }
        h1 { font-size: 1.8rem; margin-bottom: 10px; color: #fff; }
        .sync-info { display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 10px; }
        .sync-code-display { background: rgba(255,255,255,0.1); padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; color: #888; }
        .btn-change-code { background: none; border: none; color: #4a90d9; cursor: pointer; font-size: 0.8rem; text-decoration: underline; }
        .btn-change-code:hover { color: #6ab0f9; }
        .sync-status { font-size: 0.75rem; color: #888; margin-bottom: 10px; }
        .sync-status.synced { color: #44d944; }
        .sync-status.syncing { color: #d9a344; }
        .sync-status.offline { color: #d94444; }
        .stats {
            display: flex; justify-content: center; gap: 20px;
            font-size: 0.9rem; color: #888;
        }
        .stats span { background: rgba(255,255,255,0.1); padding: 5px 12px; border-radius: 20px; }
        .category-filter { display: flex; flex-wrap: wrap; gap: 8px; justify-content: center; margin-bottom: 20px; }
        .category-btn {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
            color: #e0e0e0; padding: 8px 16px; border-radius: 20px;
            cursor: pointer; font-size: 0.85rem; transition: all 0.2s;
        }
        .category-btn:hover { background: rgba(255,255,255,0.2); }
        .category-btn.active { background: #4a90d9; border-color: #4a90d9; color: #fff; }
        .card-container { perspective: 1000px; margin-bottom: 20px; }
        .card {
            background: linear-gradient(145deg, #2a2a4a 0%, #1e1e3a 100%);
            border-radius: 16px; min-height: 320px; cursor: pointer;
            transition: transform 0.6s; transform-style: preserve-3d;
            position: relative; box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        .card.flipped { transform: rotateY(180deg); }
        .card-face {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            padding: 30px; backface-visibility: hidden;
            display: flex; flex-direction: column; align-items: center;
            border-radius: 16px;
        }
        .card-front { background: linear-gradient(145deg, #2a2a4a 0%, #1e1e3a 100%); }
        .card-back { background: linear-gradient(145deg, #1e3a1e 0%, #1a2e1a 100%); transform: rotateY(180deg); overflow-y: auto; }
        .card-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: #888; margin-bottom: 15px; }
        .card-category { font-size: 0.7rem; background: rgba(74, 144, 217, 0.3); color: #4a90d9; padding: 4px 10px; border-radius: 10px; margin-bottom: 15px; }
        .card-content { flex: 1; font-size: 1.1rem; line-height: 1.6; text-align: left; width: 100%; }
        .card-content ul, .card-content ol { margin-left: 20px; margin-top: 10px; }
        .card-content li { margin-bottom: 8px; }
        .card-content strong { color: #4a90d9; }
        .card-hint { font-size: 0.8rem; color: #666; text-align: center; margin-top: 20px; }
        .person-photo {
            width: 180px; height: 180px; border-radius: 50%; object-fit: cover;
            border: 4px solid rgba(255,255,255,0.2); margin-bottom: 15px;
        }
        .person-name { font-size: 1.4rem; font-weight: 600; color: #fff; margin-bottom: 8px; text-align: center; }
        .person-title { font-size: 0.95rem; color: #4a90d9; text-align: center; }
        .controls { display: flex; gap: 12px; justify-content: center; }
        .btn {
            padding: 14px 28px; border: none; border-radius: 12px;
            font-size: 1rem; font-weight: 600; cursor: pointer; transition: all 0.2s;
        }
        .btn-again { background: linear-gradient(145deg, #d94444 0%, #b33636 100%); color: #fff; }
        .btn-again:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(217, 68, 68, 0.4); }
        .btn-good { background: linear-gradient(145deg, #44d944 0%, #36b336 100%); color: #fff; }
        .btn-good:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(68, 217, 68, 0.4); }
        .btn-flip { background: linear-gradient(145deg, #4a90d9 0%, #3a7bc8 100%); color: #fff; width: 100%; }
        .btn-flip:hover { transform: translateY(-2px); box-shadow: 0 5px 20px rgba(74, 144, 217, 0.4); }
        .progress-bar { width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; margin-bottom: 20px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #4a90d9, #44d944); border-radius: 3px; transition: width 0.3s; }
        .empty-state { text-align: center; padding: 60px 20px; color: #888; }
        .empty-state h2 { color: #44d944; margin-bottom: 10px; }
        .session-complete { text-align: center; padding: 40px; }
        .session-complete h2 { color: #44d944; font-size: 1.5rem; margin-bottom: 15px; }
        .btn-restart { background: linear-gradient(145deg, #4a90d9 0%, #3a7bc8 100%); color: #fff; margin-top: 20px; }
        .mode-toggle { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; }
        .mode-btn {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2);
            color: #e0e0e0; padding: 10px 20px; border-radius: 10px;
            cursor: pointer; font-size: 0.9rem; transition: all 0.2s;
        }
        .mode-btn.active { background: #4a90d9; border-color: #4a90d9; }
        .modal-overlay {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.8); display: flex;
            align-items: center; justify-content: center; z-index: 1000;
        }
        .modal {
            background: linear-gradient(145deg, #2a2a4a 0%, #1e1e3a 100%);
            border-radius: 16px; padding: 40px; max-width: 400px; width: 90%; text-align: center;
        }
        .modal h2 { margin-bottom: 15px; color: #fff; }
        .modal p { color: #888; margin-bottom: 25px; font-size: 0.9rem; line-height: 1.5; }
        .modal input {
            width: 100%; padding: 15px; border: 2px solid rgba(255,255,255,0.2);
            border-radius: 10px; background: rgba(255,255,255,0.1); color: #fff;
            font-size: 1rem; margin-bottom: 20px; text-align: center;
        }
        .modal input:focus { outline: none; border-color: #4a90d9; }
        .modal input::placeholder { color: #666; }
        .modal .btn { width: 100%; }
        @media (max-width: 500px) {
            .card { min-height: 280px; }
            .card-content { font-size: 1rem; }
            .person-photo { width: 140px; height: 140px; }
            .controls { flex-direction: column; }
            .btn { width: 100%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Pennington Flashcards</h1>
            <div style="margin-bottom: 12px;"><a href="briefing.html" style="color: #4a90d9; text-decoration: none; font-size: 0.9rem;">Daily Briefing</a> <span style="color: #444;">|</span> <a href="people.html" style="color: #4a90d9; text-decoration: none; font-size: 0.9rem;">People</a></div>
            <div class="sync-info">
                <span class="sync-code-display" id="sync-code-display"></span>
                <button class="btn-change-code" onclick="showSyncModal()">Change</button>
            </div>
            <div class="sync-status" id="sync-status">Connecting...</div>
            <div class="stats">
                <span id="mastered">Mastered: 0</span>
                <span id="learning">Learning: 0</span>
                <span id="total">Total: 0</span>
            </div>
        </header>
        <div class="progress-bar"><div class="progress-fill" id="progress"></div></div>
        <div class="mode-toggle">
            <button class="mode-btn active" data-mode="due">Due Cards</button>
            <button class="mode-btn" data-mode="all">All Cards</button>
            <button class="mode-btn" data-mode="shuffle">Shuffle All</button>
        </div>
        <div class="category-filter" id="categories"></div>
        <div id="card-area"></div>
    </div>

    <!-- Sync Code Modal -->
    <div class="modal-overlay" id="sync-modal" style="display: none;">
        <div class="modal">
            <h2>Enter Sync Code</h2>
            <p>Use the same code on all your devices to keep your progress in sync. Pick something memorable but unique to you.</p>
            <input type="text" id="sync-code-input" placeholder="e.g., derek-pennington-2025" autocomplete="off" autocapitalize="off">
            <button class="btn btn-flip" onclick="setSyncCode()">Start Studying</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js';
        import { getFirestore, doc, setDoc, onSnapshot } from 'https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyB6XEptBOgnJceezeG91z0Mpug_tQKm3gw",
            authDomain: "pennington-flashcards.firebaseapp.com",
            projectId: "pennington-flashcards",
            storageBucket: "pennington-flashcards.firebasestorage.app",
            messagingSenderId: "812143305002",
            appId: "1:812143305002:web:7fb131c1d503750f78fe53"
        };

        let db = null;
        let unsubscribe = null;

        try {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
        } catch (e) {
            console.error('Firebase init failed:', e);
        }

        const flashcards = [
            // Company Basics
            { id: 1, category: "Company Basics", front: "What is Pennington's AUM?", back: "~$4 billion ($3.95B as of Dec 2024)" },
            { id: 2, category: "Company Basics", front: "What is Pennington's internal valuation and EBITDA?", back: "$60M valuation, $3-4M EBITDA" },
            { id: 3, category: "Company Basics", front: "What systems does Pennington use?", back: "QuickBooks (accounting), Addepar (client portfolio reporting). Sage Intacct migration planned but not started." },
            // Funds
            { id: 4, category: "Funds", front: "What funds does Pennington manage?", back: "10 private funds:\n1. Pennington Alternative Income IDF, LP\n2. PTM Partners Opportunity Zone Fund 1, LP\n3. Pennington Real Estate Partners OZF, LP\n4. Pennington Appreciation Fund, LP\n5. Pennington Alternative Income Fund, LP\n6. Pennington Alternative Income Access, LP\n7. PTM Partners Opportunity Zone Fund III, LP\n8. Pennington Private Access, LP\n9. Atomizer LXIV (series of Atomizer LLC)\n10. Pennington Liquidity Fund, LP" },
            { id: 5, category: "Funds", front: "Pennington Alternative Income IDF, LP - Key Facts?", back: "- AUM: $87,391,009\n- Investors: 1\n- Administrator: JTC Group\n- Custodian: Charles Schwab & Co., Inc." },
            { id: 6, category: "Funds", front: "PTM Partners Opportunity Zone Fund 1, LP - Key Facts?", back: "- AUM: $80,249,840\n- Investors: 88\n- Administrator: Juniper Square\n- Custodian: Charles Schwab & Co. Inc. / National City Bank" },
            { id: 7, category: "Funds", front: "Pennington Real Estate Partners OZF, LP - Key Facts?", back: "- AUM: $67,164,193\n- Investors: 5\n- Administrator: NAV Consulting\n- Custodian: First Republic Bank" },
            { id: 8, category: "Funds", front: "Pennington Appreciation Fund, LP - Key Facts?", back: "- AUM: $35,266,274\n- Investors: 27\n- Administrator: JTC Group\n- Custodian: Charles Schwab & Co., Inc." },
            { id: 9, category: "Funds", front: "Pennington Alternative Income Fund, LP - Key Facts?", back: "- AUM: $24,774,151\n- Investors: 24\n- Administrator: JTC Group\n- Custodians: BNY Pershing, JPMorgan Chase" },
            { id: 10, category: "Funds", front: "Pennington Alternative Income Access, LP - Key Facts?", back: "- AUM: $13,905,455\n- Investors: 25\n- Administrator: Aduro Advisors, LLC\n- Custodians: Avidbank, JPMorgan Chase" },
            { id: 11, category: "Funds", front: "PTM Partners Opportunity Zone Fund III, LP - Key Facts?", back: "- AUM: $8,147,189\n- Investors: 35\n- Administrator: Juniper Square\n- Custodian: Charles Schwab & Co. / National City Bank" },
            { id: 12, category: "Funds", front: "Pennington Private Access, LP - Key Facts?", back: "- AUM: $7,426,876\n- Investors: 17\n- Administrator: Aduro Advisors, LLC\n- Custodians: Avidbank, JPMorgan Chase" },
            { id: 13, category: "Funds", front: "Atomizer LXIV, A Series of Atomizer LLC - Key Facts?", back: "- AUM: $4,352,065\n- Investors: 33\n- Administrator: Allocations\n- Custodian: Evolve Bank & Trust" },
            { id: 14, category: "Funds", front: "Pennington Liquidity Fund, LP - Key Facts?", back: "- AUM: $1,030,293\n- Investors: 11\n- Administrator: JTC Group\n- Custodian: Charles Schwab & Co., Inc." },
            // Carnegie
            { id: 15, category: "Carnegie", front: "Carnegie: 3 Fundamental Techniques in Handling People?", back: "1. Don't criticize, condemn, or complain\n2. Give honest and sincere appreciation\n3. Arouse in the other person an eager want" },
            { id: 16, category: "Carnegie", front: "Carnegie: 6 Ways to Make People Like You?", back: "1. Become genuinely interested in other people\n2. Smile\n3. Remember their name\n4. Be a good listener - encourage them to talk about themselves\n5. Talk in terms of their interests\n6. Make them feel important - sincerely" },
            { id: 17, category: "Carnegie", front: "Carnegie: How to change people without giving offense?", back: "1. Begin with praise\n2. Call attention to mistakes indirectly\n3. Talk about your own mistakes first\n4. Ask questions instead of giving orders\n5. Let the other person save face\n6. Praise every improvement\n7. Give them a reputation to live up to\n8. Make faults seem easy to correct" },
            { id: 18, category: "Carnegie", front: "Carnegie: Why can't you win an argument?", back: "Even if you \"win\" logically, you lose the relationship. The other person feels resentful and won't support you. Better to avoid arguments entirely - show respect for their opinion, admit when you're wrong, and find common ground." },
            { id: 19, category: "Carnegie", front: "How to apply Carnegie with Brian?", back: "- Frame requests in terms of what HE wants (decisions, not data)\n- Let him feel ownership of ideas\n- Admit mistakes quickly and emphatically\n- Give sincere appreciation for his guidance\n- Don't argue - ask questions instead" },
            // Slootman
            { id: 20, category: "Slootman", front: "Slootman (Amp It Up): What are the 4 core principles?", back: "1. Raise your standards - don't accept mediocrity\n2. Increase tempo - speed is a competitive advantage\n3. Sharpen focus - fewer priorities, executed with intensity\n4. Be a DRIVER not a PASSENGER - own outcomes" },
            { id: 21, category: "Slootman", front: "Slootman: Driver vs. Passenger mindset?", back: "Drivers: Own outcomes, ask \"what can I do?\", move the ball forward, take initiative\n\nPassengers: Observe, ask \"what should someone do?\", wait to be told, spectate\n\nAmy and John were passengers. Be a driver." },
            { id: 22, category: "Slootman", front: "Slootman: What does \"declare bankruptcy\" mean?", back: "Kill legacy approaches that aren't working. Don't polish a turd - start fresh. Sunk cost fallacy kills progress. If a system is broken (e.g., QuickBooks processes), redesign from scratch rather than patching." },
            { id: 23, category: "Slootman", front: "Slootman: Why tempo matters?", back: "- What takes a month should take a week\n- What takes a week should take a day\n- Urgency is a cultural attribute, not a response to crisis\n- Speed compounds - faster cycles = more learning = better outcomes" },
            { id: 24, category: "Slootman", front: "How to apply Slootman at Pennington?", back: "- Match or exceed Brian's operating tempo\n- Pick 2-3 priorities (ERP, PnL by People, close process) - not 10\n- Own problems end-to-end without being asked\n- Don't over-study Sage Intacct migration - execute\n- Raise the bar on finance team output" },
            // Gawande
            { id: 25, category: "Gawande", front: "Gawande (Checklist Manifesto): Why do checklists work?", back: "- Complexity exceeds human memory and attention\n- Errors happen from ineptitude (failing to apply what we know), not ignorance\n- Checklists catch \"dumb\" mistakes that derail important work\n- They externalize working memory" },
            { id: 26, category: "Gawande", front: "Gawande: Two types of checklists?", back: "1. DO-CONFIRM: Work from memory, then pause and verify all steps were done\n\n2. READ-DO: Read each item, then do it step-by-step (for high-stakes processes)" },
            { id: 27, category: "Gawande", front: "Gawande: Rules for good checklist design?", back: "1. Short: 5-9 items max\n2. Focus on \"killer items\" - steps most likely to be skipped but critical\n3. Precise, efficient wording\n4. Practical in real conditions\n5. Define the \"pause point\" - when to use it\n6. Test and iterate after errors" },
            { id: 28, category: "Gawande", front: "How to apply Gawande at Pennington?", back: "- Build checklists for: close, billing, capital calls, reporting, onboarding\n- John's capital call error = checklist would have caught it\n- Checklists = trust with Brian (he doesn't have to check your work)\n- After every error, update the checklist\n- Checklists are professional, not weakness" },
            // Pfeffer
            { id: 32, category: "Pfeffer", front: "Pfeffer (Power): The uncomfortable truth about success?", back: "- Performance alone doesn't guarantee success\n- The world is not just - good work often goes unrewarded\n- Power is a skill that can be learned, not an innate trait\n- You need both the WILL to acquire power and the SKILL to get it" },
            { id: 33, category: "Pfeffer", front: "Pfeffer: 7 personal qualities that build power?", back: "1. Ambition - wanting influence\n2. Energy - high activity, stamina\n3. Focus - concentrated effort\n4. Self-knowledge - know your strengths/weaknesses\n5. Confidence - project certainty\n6. Empathy - read others\n7. Capacity for conflict - willingness to fight" },
            { id: 34, category: "Pfeffer", front: "Pfeffer: 5 structural sources of power?", back: "1. Control of resources - budget, headcount, information\n2. Formal authority - title and position\n3. Structural position - where you sit in the network\n4. Scarcity - skills others can't easily replace\n5. Visibility - being known by decision-makers" },
            { id: 35, category: "Pfeffer", front: "Pfeffer: Key tactics for building power?", back: "1. Get in the room - be where decisions happen\n2. Speak with power - fewer hedges, declarative statements\n3. Act with power - body language, eye contact\n4. Build your brand - be known for something valuable\n5. Network strategically - cultivate powerful relationships\n6. Ask for what you want - directly and repeatedly\n7. Create resources - make yourself indispensable" },
            { id: 36, category: "Pfeffer", front: "How to apply Pfeffer at Pennington?", back: "- Control resources: Own financial data and analysis leadership needs\n- Get visible: Position yourself in strategy discussions, not just operations\n- Build network: Relationships beyond finance (Taylor/Alex, Guy, client teams)\n- Ask directly: Be explicit about CFO path - don't wait to be offered\n- Early wins: Fix something visible in first 30 days\n- Create scarcity: Become the only one who sees the full financial picture" },
            { id: 37, category: "Pfeffer", front: "Carnegie vs. Pfeffer - how to resolve the tension?", back: "Carnegie says: Be likable, let others feel ownership, avoid conflict\n\nPfeffer says: Advocate for yourself, be visible, fight when necessary\n\nResolution:\n- Carnegie for daily interactions and relationship building\n- Pfeffer for career strategy and positioning\n- Carnegie: How to behave in meetings\n- Pfeffer: How to decide which meetings to be in" },
            // Willink
            { id: 41, category: "Willink", front: "Willink (Extreme Ownership): What is Extreme Ownership?", back: "- Leaders must own everything in their world - no excuses, no blaming\n- If something fails, look in the mirror first\n- The moment you blame someone else, you lose the ability to fix it\n- \"There are no bad teams, only bad leaders\"" },
            { id: 42, category: "Willink", front: "Willink: What does \"no bad teams, only bad leaders\" mean?", back: "- Team performance is always the leader's responsibility\n- If your team underperforms, that's a leadership failure to address\n- The leader sets the standard and enforces it\n- You can't blame the people - you can only fix the leadership\n\nAt Pennington: If Nadia underperforms, own it and fix it." },
            { id: 43, category: "Willink", front: "Willink: Why must leaders \"check the ego\"?", back: "- Ego clouds judgment and prevents learning\n- Personal agendas must be subordinate to the mission\n- Ego makes you defensive instead of curious\n- The best leaders are humble enough to learn from anyone\n\nApplication: Accept Brian's feedback without defensiveness." },
            { id: 44, category: "Willink", front: "Willink: What is \"Cover and Move\"?", back: "- Teams must work together, not compete\n- Every element supports each other toward the greater mission\n- Department silos kill organizations\n- Your success depends on others' success\n\nAt Pennington: Finance exists to support PMs, client teams, compliance - not compete with them." },
            { id: 45, category: "Willink", front: "Willink: Why is simplicity critical?", back: "- Plans and communications must be brutally simple\n- If your team doesn't understand, you haven't explained it well enough\n- Complexity fails under pressure\n- The leader's job is to simplify, clarify, and repeat\n\nTest: Can anyone understand your financial reports, or are you hiding behind jargon?" },
            { id: 46, category: "Willink", front: "Willink: What is \"Prioritize and Execute\"?", back: "When overwhelmed:\n1. Relax, look around, make a call\n2. Identify the highest priority problem\n3. Solve it\n4. Move to the next\n\nParalysis comes from trying to tackle everything at once. At close time: pick one thing, finish it, then the next." },
            { id: 47, category: "Willink", front: "Willink: What is Decentralized Command?", back: "- Push decision-making down to capable leaders\n- Everyone must understand the \"why\" (Commander's Intent)\n- Micromanagement is a leadership failure\n- Train your team so they can operate without you\n\nGoal: Nadia and team can handle close without you hovering." },
            { id: 48, category: "Willink", front: "Willink: What does \"Leading Up the Chain\" mean?", back: "- If your boss isn't giving you what you need, it's YOUR failure to communicate\n- Don't blame leadership - take ownership of the relationship\n- Push information up proactively\n- Leading up requires tact and persistence\n\nIf Brian doesn't understand something, you haven't explained it well enough." },
            { id: 49, category: "Willink", front: "Willink: What does \"Discipline Equals Freedom\" mean?", back: "- Structure and routine create freedom to operate\n- The more disciplined your processes, the less you react to chaos\n- Standard operating procedures free up mental bandwidth\n- Default aggressive - bias toward action\n\nChecklists, close calendars, SOPs = less firefighting, more strategic work." },
            { id: 50, category: "Willink", front: "How to apply Willink at Pennington?", back: "- Extreme Ownership: Own every outcome in finance - no excuses\n- No blame: If something breaks, fix it, don't point fingers\n- Simple: Explain financials so anyone can understand\n- Prioritize & Execute: When overwhelmed, pick one thing, finish, next\n- Lead up: If Brian doesn't have what he needs, that's on you\n- Decentralize: Train team to operate without you" },
            { id: 51, category: "Willink", front: "What killed John? (Willink lens)", back: "- No ownership: \"I've been meaning to get to that\" = excuses\n- Blamed circumstances: Didn't own the capital call error\n- Ego: Couldn't accept feedback, became defensive\n- Didn't lead up: Let relationship with Brian deteriorate\n- No decentralized command: Became bottleneck, didn't train team\n\nThe fix: Own everything, blame nothing, simplify, and train your replacement." },
            { id: 52, category: "Willink", front: "Willink's Leadership Balance (4 tensions)?", back: "Leaders must balance:\n1. Confident yet Humble - lead decisively but listen and learn\n2. Leader yet Follower - know when to take charge vs. support\n3. Aggressive yet Patient - default action but know when to wait\n4. Detail-oriented yet Big Picture - zoom in and out as needed" },
            // Sterner
            { id: 60, category: "Sterner", front: "Sterner (The Practicing Mind): What is the core insight?", back: "Process over product.\n\n- When you focus on the process, the product takes care of itself\n- When you focus on the product, you fight yourself — boredom, impatience, frustration\n- \"When you shift your goal from the product to the process, all pressure drops away\"\n- Goals are a compass, not a destination" },
            { id: 61, category: "Sterner", front: "Sterner: What is the DOC method?", back: "Do, Observe, Correct.\n\n1. Do: Take action deliberately\n2. Observe: Watch what happens without judgment\n3. Correct: Adjust course\n4. Repeat\n\nThis is deliberate growth. The key is OBSERVE — no judgment, no self-criticism, just noticing." },
            { id: 62, category: "Sterner", front: "Sterner: What are the Four S's?", back: "Simplify, Small, Short, Slow.\n\n- Simplify: Break complex tasks into simple components\n- Small: Work in small, manageable pieces\n- Short: Use shorter time intervals of focused effort\n- Slow: Slow down to build precision and awareness\n\nThese four reinforce each other. Direct antidote to overwhelm." },
            { id: 63, category: "Sterner", front: "Sterner: Why is non-judgment so important?", back: "- Judgment redirects and wastes energy\n- Labeling practice as \"good\" or \"bad\" pulls you out of the present\n- Non-judgmental observation paradoxically makes improvement faster\n- Equanimity comes from nonjudgment\n\nDon't beat yourself up for mistakes — observe, correct, continue." },
            { id: 64, category: "Sterner", front: "Sterner: Why does focusing on the product cause problems?", back: "- Creates anxiety about the gap between where you are and where you want to be\n- Makes you impatient with the process\n- Robs you of satisfaction in the present moment\n- \"The problem with patience and discipline is that developing each requires both\"\n\nThe fix: Make the process the goal. When the process IS the goal, there's nothing to be impatient about." },
            { id: 65, category: "Sterner", front: "Sterner: What does \"you're always practicing something\" mean?", back: "- Every moment you're reinforcing habits — whether deliberately or not\n- If you practice being distracted, you get better at being distracted\n- If you practice impatience, you get better at being impatient\n- The question isn't WHETHER you're practicing, but WHAT\n\nBring awareness to what you're actually rehearsing each day." },
            { id: 66, category: "Sterner", front: "How to apply Sterner at Pennington?", back: "- Process over product: Don't fixate on \"becoming CFO\" — focus on today's task\n- DOC method: Do the close, observe what worked, correct — no self-judgment\n- Four S's: ERP migration overwhelming? Simplify, Small pieces, Short sprints, Slow deliberate work\n- Single-tasking: One thing at a time, fully present\n- Non-judgment: Mistakes aren't failures, they're data\n- Patience: Trust the process — 90-day plan, 12-month CFO track" },
            { id: 67, category: "Sterner", front: "Sterner vs. Slootman: How to resolve the tension?", back: "Slootman: Faster, more urgent, compress timelines.\nSterner: Slow down, be present, trust the process.\n\nResolution:\n- Slootman = organizational tempo (move fast across tasks)\n- Sterner = personal execution quality (be present within each task)\n- Speed without presence = sloppy (John)\n- Presence without speed = slow (also John)\n- You need both." },
            { id: 68, category: "Sterner", front: "Why is Sterner especially important for ADHD?", back: "- ADHD brain craves the PRODUCT (results, dopamine) — Sterner rewires you for PROCESS satisfaction\n- Four S's are a direct antidote to ADHD overwhelm\n- Non-judgment prevents the shame spiral that kills productivity\n- Single-tasking fights the impulse to context-switch\n- DOC gives self-correction without self-criticism\n- When the process IS the goal, there's always something to feel good about" },
            // Entity Structure
            { id: 70, category: "Entity Structure", front: "What are the 4 advisory entities under Pennington's SEC registration?", back: "1. **Pennington Partners & Co., LLC** — Primary filing adviser (the main RIA)\n2. **Pennington Alternative Income Management, LLC** — Relying adviser (alt income strategies)\n3. **SaaS Ventures, LLC** — Related adviser (VC in SaaS)\n4. **Pennington Private Access, LLC** — Related adviser (private markets access)" },
            { id: 71, category: "Entity Structure", front: "Who owns Pennington Partners & Co., LLC and what are the ownership percentages?", back: "- **Brian Gaister** — 50-75% (Co-Founder, CEO)\n- **Rodd Macklin** — 10-25% (Co-Founder, Senior MD)\n- **Guy Scott** — <5% (CCO)\n- **GF Angel, LLC** — <5% (Brian's personal investment vehicle)" },
            { id: 72, category: "Entity Structure", front: "What is a 'relying adviser' and which entity has that status?", back: "**Pennington Alternative Income Management, LLC** is the relying adviser.\n\nA relying adviser operates under the umbrella SEC registration of the primary filing adviser (PP&Co) rather than registering separately. It's a related entity that relies on the main RIA's registration." },
            { id: 73, category: "Entity Structure", front: "What are the 3 funds in the Alternative Income cluster?", back: "1. **Alt Income IDF, LP** — $87.4M, 1 investor (insurance dedicated fund)\n2. **Alt Income Fund, LP** — $24.8M, 24 investors (hedge fund)\n3. **Alt Income Access, LP** — $13.9M, 25 investors (liquidity/feeder)\n\nAll managed by Pennington Alternative Income Management, LLC" },
            { id: 74, category: "Entity Structure", front: "What are the 2 Real Estate / Opportunity Zone funds?", back: "1. **PTM Partners OZF I, LP** — $80.2M, 88 investors\n   GP: PTM Partners OZF I GP, LLC\n   Admin: Juniper Square\n\n2. **Pennington Real Estate Partners OZF, LP (PREP)** — $67.2M, 5 investors\n   GP: Pennington RE Partners OZF GP, LLC\n   Admin: NAV Consulting\n   Launched Jan 2024, co-led by Taylor Coe & Alex Rongione" },
            { id: 75, category: "Entity Structure", front: "What is the GP/LP structure and why does each fund have a separate GP entity?", back: "Each fund (LP) has a dedicated **General Partner entity (GP LLC)**.\n\n- The GP manages the fund and makes investment decisions\n- The GP earns management fees and carried interest\n- Separate GP entities provide liability isolation between funds\n- LPs (investors) have limited liability\n\nExample: Pennington Alt Income Fund GP, LLC → manages → Pennington Alt Income Fund, LP" },
            { id: 76, category: "Entity Structure", front: "What is GF Angel, LLC?", back: "Brian Gaister's personal investment vehicle / family office entity.\n\n- Owns <5% of Pennington Partners & Co. directly\n- Likely holds Brian's angel investments and personal stake\n- Listed in ADV but marked as non-control person\n- Watch for: intercompany transactions, conflicts of interest" },
            { id: 77, category: "Entity Structure", front: "What is PTM Partners Fund Manager, LLC?", back: "A separate **management company** that handles the economics for PTM Partners funds.\n\n- Distinct from the specific GP entities\n- Handles management fee collection and distribution\n- Adds a layer of complexity: Who pays what? How do economics flow between PTM Fund Manager and the GPs?" },
            { id: 78, category: "Entity Structure", front: "What are Fordham Street, LLC and Pennington-TX, LLC?", back: "**Fordham Street, LLC**\n- JV partner / SPV for PREP real estate assets\n- Co-manages alongside Pennington RE Partners OZF GP\n\n**Pennington-TX, LLC**\n- Holding entity for Texas operations (Houston office)\n- 1885 St. James Place, Suite 850, Houston, TX\n- Exists for state compliance / tax structuring" },
            { id: 79, category: "Entity Structure", front: "How many total legal entities does Pennington have and why does it matter for VP of Finance?", back: "**20+ legal entities** across:\n- 4 advisory entities\n- 11 GP entities\n- 9+ funds (LPs)\n- 5 holding/other entities\n\n**VP of Finance implications:**\n- 20+ sets of books, K-1s, tax returns, bank accounts\n- 4 different fund administrators (JTC, Aduro, Juniper Square, NAV)\n- 6+ custodians (Schwab, JPMorgan, BNY Pershing, Avidbank, First Republic, National City)\n- Each with different reporting formats and reconciliation processes" },
            { id: 80, category: "Entity Structure", front: "Which fund administrator handles which funds?", back: "**JTC Group:** Alt Income Fund, Alt Income IDF, Appreciation Fund, Liquidity Fund\n**Aduro Advisors:** Alt Income Access, Private Access\n**Juniper Square:** PTM Partners OZF I, PTM Partners OZF III\n**NAV Consulting:** PREP OZF\n**Allocations:** Atomizer LXIV" },
            { id: 81, category: "Entity Structure", front: "What is NSL, LLC?", back: "A related entity listed as sponsor/GP of pooled investment vehicles.\n\n- Limited information available\n- Serves a comparable function to other GP entities\n- Generic acronym — need to learn more once in seat" },
            { id: 82, category: "Entity Structure", front: "What are the Venture / Appreciation funds?", back: "1. **Pennington Appreciation Fund, LP** — $35.3M, 27 investors\n   GP: Pennington Appreciation Fund GP, LLC\n   Admin: JTC Group · Custodian: Schwab\n   Type: Venture capital\n\n2. **SaaS Ventures Fund I** — GP: SaaS Ventures GP, LLC\n3. **SaaS Ventures Fund II** — GP: SaaS Ventures Fund II GP, LLC\n   Both co-founded by Brian & Rodd, focused on SaaS VC" },
            // Collins
            { id: 83, category: "Collins", front: "What's the single best question to ask about luck?", back: "\"What return did I get on the luck I received?\" (not \"Was I lucky?\").\n\nLuck is an input — ROL (return on luck) is what matters." },
            { id: 84, category: "Collins", front: "How do you reliably get a high return on luck?", back: "Build a resilient operating system:\n\n1. **SMaC recipe** — specific, methodical, consistent playbook\n2. **20 Mile March** — consistent progress regardless of conditions\n3. **Bullets → Cannonballs** — test small, then scale what works\n4. **Productive paranoia** — prepare for bad luck\n\nSo you compound good breaks and survive bad ones." },
            { id: 85, category: "Collins", front: "What's the luck asymmetry you must design for?", back: "Good luck can't make you great by itself, but a single catastrophic bad-luck event can end the game.\n\n**Design principle:** Plan to stay above the \"death line.\"\n\nUpside is capped, downside is existential — so bias toward survival." },
            { id: 86, category: "Collins", front: "What is the SMaC recipe?", back: "Your operating playbook — clear, repeatable rules you follow for a long time, even when things get chaotic.\n\n**S**pecific: Not vague values (\"be excellent\"), but concrete rules (\"respond within 24 hours,\" \"ship every Friday,\" \"keep 3 months cash\")\n\n**M**ethodical: Chosen deliberately and updated based on evidence, not vibes\n\n**a**nd **C**onsistent: Stick to it across good times and bad, so performance doesn't whipsaw with environment" },
            { id: 87, category: "Collins", front: "What's \"Bullets, then Cannonballs\"?", back: "**Bullets** = small, cheap, low-risk tests\nFast experiments that give real feedback. You're trying to learn: does this work and why?\n\n**Cannonballs** = big, concentrated bets\nOnce you have evidence from bullets, commit serious resources and scale hard.\n\nThe sequence matters: fire bullets to calibrate, THEN fire cannonballs." },
            // Sullivan
            { id: 88, category: "Sullivan", front: "What's the core move of 10x thinking?", back: "Raise the target so high that it forces focus.\n\n**Prune ~80%** of low-leverage work and **go all-in on the 20%** that can actually compound to 10x.\n\n2x goals let you keep doing what you're doing. 10x goals force you to rethink everything." },
            { id: 89, category: "Sullivan", front: "What's the most useful delegation question?", back: "Not \"How do I do this?\" but \"**Who can own this outcome?**\"\n\nBuy focus by investing in Whos.\n\nYour job isn't to figure out how — it's to find the right who and free yourself for higher-leverage work." },
            // Integration
            { id: 29, category: "Integration", front: "How do the 6 books work together?", back: "Making a mistake:\n- Carnegie: Admit quickly\n- Slootman: Fix fast, raise bar\n- Gawande: Update checklist\n- Willink: Own it completely, no excuses\n- Sterner: Observe without judgment, correct, move on\n\nFeeling overwhelmed:\n- Slootman: Pick 2-3 priorities\n- Gawande: Checklist the chaos\n- Willink: Prioritize and execute\n- Sterner: Simplify, Small, Short, Slow\n\nManaging up:\n- Carnegie: Frame in Brian's interests\n- Slootman: Match his tempo\n- Pfeffer: Make yourself indispensable\n- Willink: If he doesn't get it, you haven't communicated\n- Sterner: Be fully present when he's talking" },
            { id: 30, category: "Integration", front: "Daily reflection questions from the 6 books?", back: "Morning:\n- What are my 2-3 priorities? (Slootman)\n- Who do I need to build relationship with? (Carnegie)\n- What could go wrong that a checklist would catch? (Gawande)\n- How am I building my power base? (Pfeffer)\n- What am I taking complete ownership of? (Willink)\n- Am I focused on process or fixated on outcome? (Sterner)\n\nEvening:\n- Did I operate with urgency? (Slootman)\n- Did I give sincere appreciation? (Carnegie)\n- What process broke that needs a checklist? (Gawande)\n- Did I increase my visibility? (Pfeffer)\n- Did I blame anyone or make excuses? (Willink)\n- Did I practice with awareness or just go through motions? (Sterner)" },
            { id: 31, category: "Integration", front: "What killed John at Pennington? (through the lens of 6 books)", back: "- Carnegie: Didn't own his mistake (\"I've been meaning to get to that\")\n- Slootman: Passenger mindset, low tempo, tolerated mediocrity\n- Gawande: No checklist caught the capital call error\n- Pfeffer: No credibility, no power base, easily replaceable\n- Willink: Blamed circumstances, didn't lead up, no ownership\n- Sterner: Focused on looking competent (product) instead of doing the work (process)\n\nThe fix: Trust the process (Sterner), own everything (Willink), admit fast (Carnegie), operate with urgency (Slootman), build checklists (Gawande), make yourself indispensable (Pfeffer)." },
            // People
            { id: 101, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/80bf71a3-7677-4e91-9b95-2e374208e944/f_220042_110016_8x10.jpg", back: "Brian Gaister\nCo-Founder, CEO" },
            { id: 102, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/1633905262294-O1KLD0YCSKDLFWNF9YJ9/Rodd%2BMacklin.jpg", back: "Rodd Macklin\nCo-Founder, Senior Managing Director" },
            { id: 103, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/1638898224652-QHE08BDVK9JS4ACLG7T0/Kent%2BAndrews_8x10.jpg", back: "Kent Andrews\nPartner, Investments" },
            { id: 104, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/1e0953ea-ad53-43c4-bb4a-535f500e03ec/DSC_7717rev1.jpg", back: "Jill Sheppard Davenport\nPartner, Director of Health and Wellness" },
            { id: 105, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/356377f1-e97e-415a-8083-6aa713015138/Rubenstein_0946_4x6print_bw.jpg", back: "Michael Rubenstein\nPartner, Director of Income & Estate Tax Minimization" },
            { id: 106, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/6f7020f3-2239-48e8-b59d-b6dc67bbd552/k.png", back: "Keith Kellum\nPartner & Portfolio Manager" },
            { id: 107, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/41c930fe-f726-43de-a6d3-2588303a6033/M.png", back: "Marilyn Santiago\nPartner & Head of Relationship Management" },
            { id: 108, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/fcea32f1-e26a-4e68-8e1e-417906604149/Wendy+Xu+-+Headshot.jpg", back: "Wendy Xu\nManaging Director, Private Markets" },
            { id: 109, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/da1de05b-5b0a-4dbc-9d9b-97e8c3f058d0/Taylor.jpg", back: "Taylor Coe\nManaging Director, Pennington Real Estate Partners" },
            { id: 110, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/00b21095-1596-433f-a61f-5c7b837befcc/Alex.jpg", back: "Alex Rongione\nManaging Director, Pennington Real Estate Partners" },
            { id: 111, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/54fc879a-6a96-4745-93c4-67862ecc1409/Sheain_1002_4x4print_Square_BW.jpg", back: "Trey Sheain\nPortfolio Manager, CFA" },
            { id: 112, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/bd070fda-8e31-4d71-886f-3be6750d75dd/Matt+Devine+-+headshot.jpg", back: "Matthew Devine\nPortfolio Manager, CFA" },
            { id: 113, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/d2575a2a-a844-4821-8ec3-7e2b2146fd30/Will+Lowrie-modified.jpg", back: "William Lowrie\nPortfolio Manager, CFA" },
            { id: 114, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/1634746751089-OFA1WQ0V8342Z05072ZN/Megan%2BBleil_new%2BBIG%2BFILE.jpg", back: "Megan Bleil\nPartner, Family Office Advisor" },
            { id: 115, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/c7e6d5b7-07e7-41b3-96e1-6f34b4048f3d/Will+Helkart+Headshot.png", back: "Will Halkyard\nClient Relationship Officer" },
            { id: 116, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/d0e3f38e-ca96-4e1d-8aba-5b1d2e631404/f_240046_110051.jpg", back: "Olimpia Sulla\nDirector, Wealth Strategy & Estate Planning" },
            { id: 117, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/425098c5-315c-4293-bc7e-665d91e039c4/Graf%2C+Megan3656-headshot-full_frame-hires_bw+%282%29+%281%29.jpg", back: "Megan Graf\nSenior Operations Advisor" },
            { id: 118, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/eb81bebd-2f56-4ec2-8863-8036e125b21e/u_210122_110082+Pennington.jpg", back: "Guy Scott\nChief Compliance Officer" },
            { id: 119, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/77751dea-4029-4697-a8a4-60595c01cbfe/Screenshot+2025-06-18+152237.png", back: "David Bell\nSenior Legal Advisor" },
            { id: 120, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/00e05149-7353-493a-8dc7-a2c7d8507e35/Chad+Lilly+-+Headshot.jpg", back: "Chad Lilly\nVice President, Head of Talent Acquisition" },
            { id: 121, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/17eda384-47c9-447d-857c-5144100e6d60/Rizas_Headshot.jpg", back: "John Rizas\nDirector of Finance" },
            { id: 122, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/f801e0d7-12ee-47c0-8d93-732daede3e4f/Nadia+headshot.jpg", back: "Nadia Khan\nSenior Staff Accountant" },
            { id: 123, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/24417788-c8df-434f-8701-0af8526d462e/Jacob+Reinhardt+Headshot.png", back: "Jacob Reinhardt\nInvestment Analyst" },
            { id: 124, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/649d0be1-5e49-4c72-89ea-26067215964b/Longhe+Cao+Headshot.png", back: "Longhe Cao\nInvestment Analyst" },
            { id: 125, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/683f4d8f-5eeb-4794-a779-bcafccc333b1/unnamed.png", back: "Nicole Clark-Ramirez\nHealth & Wellness Specialist" },
            { id: 126, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/6faa2093-a1df-481b-9eb6-1b043b36058c/Jamie+McLaughlin.jpg", back: "Jamie McLaughlin\nSenior Advisor" },
            { id: 127, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/14fbbdfd-ffa5-40d7-a66e-c9862839ad3c/strassler.jpg", back: "Philip Strassler\nSenior Advisor, CPA" },
            { id: 128, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/1636058549216-VID20KECP4LX4XJWSHZ3/RPS_Pic.jpg", back: "Roger Staiger\nSenior Real Estate Advisor" },
            { id: 129, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/d4ac55c8-6103-486f-ba01-7cf4f65b2577/Screenshot+2025-06-03+102915.png", back: "Tommy Wright\nSenior Advisor" },
            { id: 130, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/09fc5595-fd9e-422d-ad9d-d867e5bfe677/Sehkar+Headshot.png", back: "Sehkar Puli\nSenior Advisor" },
            { id: 131, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/9cfa91b6-a509-4399-be7d-6abef54c7906/Barak+Headshot.png", back: "Barak Kaufman\nSenior Advisor" },
            { id: 132, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/e251c428-516a-43e2-b724-f9b84a7536dd/Daivd+Homan+.png", back: "David Homan\nSenior Advisor" },
            { id: 133, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/2aa6e7fd-144c-4214-a515-5aaada91233f/Eric+Rosen.jpg", back: "Eric Rosen\nSenior Advisor" },
            { id: 134, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/1dfc7bd5-736d-4ffd-b780-27603f90db45/Daniel+Erem.png", back: "Daniel Erem\nSenior Advisor" },
            { id: 135, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/3823009c-4fcf-487d-b650-9bebf7fea6ce/Tod%252BTrabocco.jpeg", back: "Tod Trabocco\nSenior Advisor" },
            { id: 136, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/c5d81661-1e28-478f-a403-1e62d378698f/Lauren+Headshot.png", back: "Lauren Lennahan\nMarketing Manager" },
            { id: 137, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/79372e0b-0b51-4b14-9bd3-5a79daefea3a/Jake+Brophy.jpg", back: "Jake Brophy\nSenior Associate, Operations" },
            { id: 138, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/4a08994c-f565-47c9-8511-6821fe168302/Odessa+Clear+Headshot.png", back: "Odessa Clear\nOperations Associate" },
            { id: 139, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/be9327ff-fe67-4cda-abc9-dfddcf48d9bb/Hannah+Aurich.jpg", back: "Hannah Aurich\nClient Relationship Officer" },
            { id: 140, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/3c2209f3-824b-4fb9-a81e-4ccbe1528808/Screenshot+2025-12-30+124810.png", back: "Ben Pieroni\nClient Relationship Officer" },
            { id: 141, category: "People", photo: "https://images.squarespace-cdn.com/content/v1/611bf6efa3a9575b9bdd22c1/943dbabd-dc6d-455d-8349-0fdc3db5c40e/Bates_2356_500x500px_72dpi_Square.jpg", back: "Courtney Bates\nExecutive Assistant" }
        ];

        // State
        let cardProgress = {};
        let currentMode = 'due';
        let currentCategory = 'all';
        let currentDeck = [];
        let currentIndex = 0;
        let isFlipped = false;
        let sessionStats = { correct: 0, incorrect: 0 };
        let syncCode = localStorage.getItem('pennington-sync-code') || '';

        const categories = ['all', ...new Set(flashcards.map(c => c.category))];

        // DOM elements
        const cardArea = document.getElementById('card-area');
        const categoriesEl = document.getElementById('categories');
        const progressEl = document.getElementById('progress');
        const masteredEl = document.getElementById('mastered');
        const learningEl = document.getElementById('learning');
        const totalEl = document.getElementById('total');
        const syncModal = document.getElementById('sync-modal');
        const syncCodeInput = document.getElementById('sync-code-input');
        const syncCodeDisplay = document.getElementById('sync-code-display');
        const syncStatusEl = document.getElementById('sync-status');

        // Sync functions
        window.showSyncModal = function() {
            syncCodeInput.value = syncCode;
            syncModal.style.display = 'flex';
            syncCodeInput.focus();
        };

        window.setSyncCode = function() {
            const code = syncCodeInput.value.trim().toLowerCase().replace(/\s+/g, '-');
            if (!code) { alert('Please enter a sync code'); return; }
            syncCode = code;
            localStorage.setItem('pennington-sync-code', syncCode);
            syncModal.style.display = 'none';
            syncCodeDisplay.textContent = syncCode;
            connectToFirebase();
        };

        syncCodeInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') window.setSyncCode();
        });

        function updateSyncStatus(status, message) {
            syncStatusEl.className = 'sync-status ' + status;
            syncStatusEl.textContent = message;
        }

        async function connectToFirebase() {
            if (!db) {
                updateSyncStatus('offline', 'Firebase not configured - using local storage');
                loadFromLocalStorage();
                return;
            }
            if (!syncCode) {
                syncModal.style.display = 'flex';
                return;
            }
            if (unsubscribe) unsubscribe();
            updateSyncStatus('syncing', 'Connecting...');

            try {
                const docRef = doc(db, 'flashcard-progress', syncCode);
                unsubscribe = onSnapshot(docRef, (docSnap) => {
                    if (docSnap.exists()) {
                        cardProgress = docSnap.data().progress || {};
                        updateSyncStatus('synced', 'Synced');
                    } else {
                        cardProgress = {};
                        updateSyncStatus('synced', 'Synced (new)');
                    }
                    initializeCardProgress();
                    localStorage.setItem('pennington-flashcards-v2', JSON.stringify(cardProgress));
                    buildDeck();
                    renderCard();
                }, (error) => {
                    console.error('Firestore error:', error);
                    updateSyncStatus('offline', 'Offline - using local data');
                    loadFromLocalStorage();
                });
            } catch (error) {
                console.error('Connection error:', error);
                updateSyncStatus('offline', 'Connection failed');
                loadFromLocalStorage();
            }
        }

        async function saveProgress() {
            localStorage.setItem('pennington-flashcards-v2', JSON.stringify(cardProgress));
            if (!db || !syncCode) return;
            try {
                updateSyncStatus('syncing', 'Saving...');
                const docRef = doc(db, 'flashcard-progress', syncCode);
                await setDoc(docRef, { progress: cardProgress, lastUpdated: new Date().toISOString() });
                updateSyncStatus('synced', 'Synced');
            } catch (error) {
                console.error('Save error:', error);
                updateSyncStatus('offline', 'Save failed - stored locally');
            }
        }

        function loadFromLocalStorage() {
            cardProgress = JSON.parse(localStorage.getItem('pennington-flashcards-v2') || '{}');
            initializeCardProgress();
            buildDeck();
            renderCard();
        }

        function initializeCardProgress() {
            flashcards.forEach(card => {
                if (!cardProgress[card.id]) {
                    cardProgress[card.id] = { level: 0, nextReview: Date.now(), lastReview: null };
                }
            });
        }

        function renderCategories() {
            categoriesEl.innerHTML = categories.map(cat =>
                `<button class="category-btn ${currentCategory === cat ? 'active' : ''}" data-category="${cat}">${cat === 'all' ? 'All' : cat}</button>`
            ).join('');
            categoriesEl.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    currentCategory = btn.dataset.category;
                    renderCategories();
                    buildDeck();
                    renderCard();
                });
            });
        }

        document.querySelectorAll('.mode-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.mode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentMode = btn.dataset.mode;
                buildDeck();
                renderCard();
            });
        });

        function buildDeck() {
            let cards = flashcards;
            if (currentCategory !== 'all') cards = cards.filter(c => c.category === currentCategory);
            if (currentMode === 'due') {
                const now = Date.now();
                cards = cards.filter(c => {
                    const p = cardProgress[c.id];
                    return p && (p.nextReview <= now || p.level === 0);
                });
                cards.sort((a, b) => (cardProgress[a.id]?.level || 0) - (cardProgress[b.id]?.level || 0));
            } else if (currentMode === 'shuffle') {
                cards = [...cards].sort(() => Math.random() - 0.5);
            }
            currentDeck = cards;
            currentIndex = 0;
            isFlipped = false;
            sessionStats = { correct: 0, incorrect: 0 };
        }

        function getNextReview(level) {
            const intervals = [0, 60000, 600000, 3600000, 86400000, 604800000];
            return Date.now() + (intervals[level] || intervals[5]);
        }

        function updateStats() {
            const mastered = flashcards.filter(c => cardProgress[c.id]?.level >= 5).length;
            const learning = flashcards.filter(c => {
                const l = cardProgress[c.id]?.level || 0;
                return l > 0 && l < 5;
            }).length;
            masteredEl.textContent = `Mastered: ${mastered}`;
            learningEl.textContent = `Learning: ${learning}`;
            totalEl.textContent = `Total: ${flashcards.length}`;
            progressEl.style.width = `${(mastered / flashcards.length) * 100}%`;
        }

        function formatText(text) {
            return text.replace(/\n/g, '<br>').replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
        }

        function renderCard() {
            updateStats();
            if (currentDeck.length === 0 || currentIndex >= currentDeck.length) {
                if (currentMode === 'due' && currentDeck.length === 0) {
                    cardArea.innerHTML = `<div class="empty-state"><h2>All caught up!</h2><p>No cards due for review.</p></div>`;
                } else {
                    cardArea.innerHTML = `<div class="session-complete"><h2>Session Complete!</h2><p>Correct: ${sessionStats.correct} | Review: ${sessionStats.incorrect}</p><button class="btn btn-restart" onclick="restartSession()">New Session</button></div>`;
                }
                return;
            }
            const card = currentDeck[currentIndex];
            const isPerson = !!card.photo;

            if (isPerson) {
                const [name, title] = card.back.split('\n');
                cardArea.innerHTML = `
                    <div class="card-container">
                        <div class="card ${isFlipped ? 'flipped' : ''}" onclick="flipCard()">
                            <div class="card-face card-front">
                                <div class="card-category">${card.category}</div>
                                <img src="${card.photo}" class="person-photo" onerror="this.style.display='none'">
                                <div class="card-hint">Who is this?</div>
                            </div>
                            <div class="card-face card-back">
                                <div class="card-category">${card.category}</div>
                                <img src="${card.photo}" class="person-photo" onerror="this.style.display='none'">
                                <div class="person-name">${name}</div>
                                <div class="person-title">${title || ''}</div>
                            </div>
                        </div>
                    </div>
                    <div class="controls">
                        ${isFlipped ? `<button class="btn btn-again" onclick="markCard(false)">Again</button><button class="btn btn-good" onclick="markCard(true)">Got it</button>` : `<button class="btn btn-flip" onclick="flipCard()">Reveal</button>`}
                    </div>`;
            } else {
                cardArea.innerHTML = `
                    <div class="card-container">
                        <div class="card ${isFlipped ? 'flipped' : ''}" onclick="flipCard()">
                            <div class="card-face card-front">
                                <div class="card-category">${card.category}</div>
                                <div class="card-label">Question ${currentIndex + 1} of ${currentDeck.length}</div>
                                <div class="card-content">${formatText(card.front)}</div>
                                <div class="card-hint">Tap to reveal</div>
                            </div>
                            <div class="card-face card-back">
                                <div class="card-category">${card.category}</div>
                                <div class="card-label">Answer</div>
                                <div class="card-content">${formatText(card.back)}</div>
                            </div>
                        </div>
                    </div>
                    <div class="controls">
                        ${isFlipped ? `<button class="btn btn-again" onclick="markCard(false)">Again</button><button class="btn btn-good" onclick="markCard(true)">Got it</button>` : `<button class="btn btn-flip" onclick="flipCard()">Show Answer</button>`}
                    </div>`;
            }
        }

        window.flipCard = function() { isFlipped = !isFlipped; renderCard(); };

        window.markCard = function(correct) {
            const card = currentDeck[currentIndex];
            const progress = cardProgress[card.id];
            if (correct) { progress.level = Math.min(5, progress.level + 1); sessionStats.correct++; }
            else { progress.level = Math.max(0, progress.level - 1); sessionStats.incorrect++; }
            progress.nextReview = getNextReview(progress.level);
            progress.lastReview = Date.now();
            saveProgress();
            currentIndex++;
            isFlipped = false;
            renderCard();
        };

        window.restartSession = function() { buildDeck(); renderCard(); };

        // Initialize
        syncCodeDisplay.textContent = syncCode || 'Not set';
        renderCategories();
        connectToFirebase();
    </script>
</body>
</html>
